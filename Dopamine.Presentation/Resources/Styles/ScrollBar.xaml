<ResourceDictionary
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:base="clr-namespace:Dopamine.Core.Base;assembly=Dopamine.Core"
  xmlns:sys="clr-namespace:System;assembly=mscorlib">

  <Style x:Key="ScrollBarLineButton" TargetType="{x:Type RepeatButton}">
    <Setter Property="OverridesDefaultStyle" Value="true" />
    <Setter Property="Focusable" Value="false" />
    <Setter Property="Template">
      <Setter.Value>
        <ControlTemplate TargetType="{x:Type RepeatButton}">
          <Border
            Name="Border"
            Margin="0"
            Background="Transparent"
            BorderBrush="Transparent"
            BorderThickness="0"
            CornerRadius="0">
            <Path
              x:Name="Path"
              HorizontalAlignment="Center"
              VerticalAlignment="Center"
              Data="{Binding Path=Content, RelativeSource={RelativeSource TemplatedParent}}"
              Fill="{DynamicResource RG_AccentBrush}" />
          </Border>
          <ControlTemplate.Triggers>
            <Trigger Property="IsMouseOver" Value="true">
              <Setter TargetName="Path" Property="Fill" Value="{DynamicResource RG_AccentBrush}" />
            </Trigger>
            <Trigger Property="IsPressed" Value="true">
              <Setter TargetName="Path" Property="Opacity" Value="0.7" />
            </Trigger>
            <Trigger Property="IsEnabled" Value="false">
              <Setter Property="Opacity" Value="0.6" />
            </Trigger>
          </ControlTemplate.Triggers>
        </ControlTemplate>
      </Setter.Value>
    </Setter>
  </Style>

  <Style x:Key="ScrollBarPageButton" TargetType="{x:Type RepeatButton}">
    <Setter Property="SnapsToDevicePixels" Value="True" />
    <Setter Property="OverridesDefaultStyle" Value="true" />
    <Setter Property="IsTabStop" Value="false" />
    <Setter Property="Focusable" Value="false" />
    <Setter Property="Template">
      <Setter.Value>
        <ControlTemplate TargetType="{x:Type RepeatButton}">
          <Border Background="Transparent" />
        </ControlTemplate>
      </Setter.Value>
    </Setter>
  </Style>

  <Style x:Key="ScrollBarThumb" TargetType="{x:Type Thumb}">
    <Setter Property="SnapsToDevicePixels" Value="True" />
    <Setter Property="OverridesDefaultStyle" Value="true" />
    <Setter Property="IsTabStop" Value="false" />
    <Setter Property="Focusable" Value="false" />
    <Setter Property="Template">
      <Setter.Value>
        <ControlTemplate TargetType="{x:Type Thumb}">
          <Border
            Name="Border"
            Background="{TemplateBinding Background}"
            BorderBrush="{TemplateBinding BorderBrush}"
            BorderThickness="0"
            CornerRadius="2" />
          <ControlTemplate.Triggers>
            <!--<Trigger Property="IsMouseOver" Value="false">
                            <Setter TargetName="Border" Property="Opacity" Value="0.5" />
                        </Trigger>-->
            <!--<Trigger Property="IsMouseOver" Value="true">
                            <Setter TargetName="Border" Property="Opacity" Value="1.0" />
                        </Trigger>-->
            <EventTrigger RoutedEvent="UIElement.MouseEnter">
              <BeginStoryboard>
                <Storyboard>
                  <DoubleAnimation
                    Storyboard.TargetProperty="Opacity"
                    To="0.7"
                    Duration="0:0:0.15" />
                </Storyboard>
              </BeginStoryboard>
            </EventTrigger>
            <EventTrigger RoutedEvent="UIElement.MouseLeave">
              <BeginStoryboard>
                <Storyboard>
                  <DoubleAnimation
                    Storyboard.TargetProperty="Opacity"
                    To="1"
                    Duration="0:0:0.15" />
                </Storyboard>
              </BeginStoryboard>
            </EventTrigger>
            <Trigger Property="IsDragging" Value="true">
              <Setter TargetName="Border" Property="Opacity" Value="0.7" />
            </Trigger>
            <Trigger Property="IsEnabled" Value="false">
              <Setter Property="Opacity" Value="0.5" />
            </Trigger>
          </ControlTemplate.Triggers>
        </ControlTemplate>
      </Setter.Value>
    </Setter>
  </Style>

  <ControlTemplate x:Key="VerticalScrollBar" TargetType="{x:Type ScrollBar}">
    <Grid>
      <Grid.RowDefinitions>
        <RowDefinition MaxHeight="0" />
        <RowDefinition Height="0.00001*" />
        <RowDefinition MaxHeight="0" />
      </Grid.RowDefinitions>
      <Border
        Grid.RowSpan="3"
        Background="{TemplateBinding Background}"
        CornerRadius="0" />
      <RepeatButton
        Grid.Row="0"
        Height="0"
        Margin="0,0,0,2"
        Command="ScrollBar.LineUpCommand"
        Content=""
        Style="{StaticResource ScrollBarLineButton}" />
      <Track
        Name="PART_Track"
        Grid.Row="1"
        IsDirectionReversed="true">
        <Track.Resources>
          <!--  Thumb's minimum height is half of this metric  -->
          <sys:Double x:Key="{x:Static SystemParameters.VerticalScrollBarButtonHeightKey}">
            60
          </sys:Double>
        </Track.Resources>
        <Track.DecreaseRepeatButton>
          <RepeatButton Command="ScrollBar.PageUpCommand" Style="{StaticResource ScrollBarPageButton}" />
        </Track.DecreaseRepeatButton>
        <Track.Thumb>
          <Thumb
            Margin="0,0,0,0"
            Background="{DynamicResource RG_AccentBrush}"
            BorderBrush="{DynamicResource RG_AccentBrush}"
            Style="{StaticResource ScrollBarThumb}" />
        </Track.Thumb>
        <Track.IncreaseRepeatButton>
          <RepeatButton Command="ScrollBar.PageDownCommand" Style="{StaticResource ScrollBarPageButton}" />
        </Track.IncreaseRepeatButton>
      </Track>
      <RepeatButton
        Grid.Row="3"
        Height="0"
        Margin="0,2,0,0"
        Command="ScrollBar.LineDownCommand"
        Content=""
        Style="{StaticResource ScrollBarLineButton}" />
    </Grid>
  </ControlTemplate>

  <ControlTemplate x:Key="HorizontalScrollBar" TargetType="{x:Type ScrollBar}">
    <Grid>
      <Grid.ColumnDefinitions>
        <ColumnDefinition MaxWidth="0" />
        <ColumnDefinition Width="0.00001*" />
        <ColumnDefinition MaxWidth="0" />
      </Grid.ColumnDefinitions>
      <Border
        Grid.ColumnSpan="3"
        Background="{TemplateBinding Background}"
        CornerRadius="0" />
      <RepeatButton
        Grid.Column="0"
        Width="0"
        Margin="0,0,2,0"
        Command="ScrollBar.LineLeftCommand"
        Content=""
        Style="{StaticResource ScrollBarLineButton}" />
      <Track
        Name="PART_Track"
        Grid.Column="1"
        IsDirectionReversed="False">
        <Track.Resources>
          <!--  Thumb's minimum width is half of this metric  -->
          <sys:Double x:Key="{x:Static SystemParameters.HorizontalScrollBarButtonWidthKey}">
            60
          </sys:Double>
        </Track.Resources>
        <Track.DecreaseRepeatButton>
          <RepeatButton Command="ScrollBar.PageLeftCommand" Style="{StaticResource ScrollBarPageButton}" />
        </Track.DecreaseRepeatButton>
        <Track.Thumb>
          <Thumb
            Margin="0,0,0,0"
            Background="{DynamicResource RG_AccentBrush}"
            BorderBrush="{DynamicResource RG_AccentBrush}"
            Style="{StaticResource ScrollBarThumb}" />
        </Track.Thumb>
        <Track.IncreaseRepeatButton>
          <RepeatButton Command="ScrollBar.PageRightCommand" Style="{StaticResource ScrollBarPageButton}" />
        </Track.IncreaseRepeatButton>
      </Track>
      <RepeatButton
        Grid.Column="3"
        Width="0"
        Margin="2,0,0,0"
        Command="ScrollBar.LineRightCommand"
        Content=""
        Style="{StaticResource ScrollBarLineButton}" />
    </Grid>
  </ControlTemplate>

  <Style x:Key="{x:Type ScrollBar}" TargetType="{x:Type ScrollBar}">
    <Setter Property="UseLayoutRounding" Value="True" />
    <Setter Property="OverridesDefaultStyle" Value="true" />
    <Setter Property="Cursor" Value="Hand" />
    <Setter Property="Background" Value="Transparent" />
    <Style.Triggers>
      <Trigger Property="Orientation" Value="Horizontal">
        <Setter Property="Width" Value="Auto" />
        <Setter Property="Height" Value="5" />
        <Setter Property="Margin" Value="0,-5,0,0" />
        <Setter Property="Template" Value="{StaticResource HorizontalScrollBar}" />
      </Trigger>
      <Trigger Property="Orientation" Value="Vertical">
        <Setter Property="Height" Value="Auto" />
        <Setter Property="Width" Value="5" />
        <Setter Property="Margin" Value="-5,0,0,0" />
        <Setter Property="Template" Value="{StaticResource VerticalScrollBar}" />
      </Trigger>
    </Style.Triggers>
  </Style>

  <Style x:Key="{x:Type ScrollViewer}" TargetType="{x:Type ScrollViewer}">
    <Setter Property="FrameworkElement.OverridesDefaultStyle" Value="True" />
    <Setter Property="Control.Template">
      <Setter.Value>
        <ControlTemplate TargetType="{x:Type ScrollViewer}">
          <Grid>
            <Grid.ColumnDefinitions>
              <ColumnDefinition Width="*" />
              <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
              <RowDefinition Height="*" />
              <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>
            <ScrollContentPresenter
              Grid.RowSpan="2"
              Grid.ColumnSpan="2"
              Margin="{TemplateBinding Padding}"
              CanContentScroll="{TemplateBinding ScrollViewer.CanContentScroll}" />
            <ScrollBar
              Name="PART_VerticalScrollBar"
              Grid.Column="1"
              Maximum="{TemplateBinding ScrollViewer.ScrollableHeight}"
              Opacity="0"
              ViewportSize="{TemplateBinding ScrollViewer.ViewportHeight}"
              Visibility="{TemplateBinding ScrollViewer.ComputedVerticalScrollBarVisibility}"
              Value="{TemplateBinding ScrollViewer.VerticalOffset}" />
            <ScrollBar
              Name="PART_HorizontalScrollBar"
              Grid.Row="1"
              Maximum="{TemplateBinding ScrollViewer.ScrollableWidth}"
              Opacity="0"
              Orientation="Horizontal"
              ViewportSize="{TemplateBinding ScrollViewer.ViewportWidth}"
              Visibility="{TemplateBinding ScrollViewer.ComputedHorizontalScrollBarVisibility}"
              Value="{TemplateBinding ScrollViewer.HorizontalOffset}" />
          </Grid>
          <ControlTemplate.Triggers>
            <EventTrigger RoutedEvent="UIElement.MouseEnter">
              <BeginStoryboard>
                <Storyboard>
                  <DoubleAnimation
                    Storyboard.TargetName="PART_VerticalScrollBar"
                    Storyboard.TargetProperty="Opacity"
                    To="1"
                    Duration="{x:Static base:Constants.MouseEnterDuration}" />
                  <DoubleAnimation
                    Storyboard.TargetName="PART_HorizontalScrollBar"
                    Storyboard.TargetProperty="Opacity"
                    To="1"
                    Duration="{x:Static base:Constants.MouseEnterDuration}" />
                </Storyboard>
              </BeginStoryboard>
            </EventTrigger>
            <EventTrigger RoutedEvent="UIElement.MouseLeave">
              <BeginStoryboard>
                <Storyboard>
                  <DoubleAnimation
                    Storyboard.TargetName="PART_VerticalScrollBar"
                    Storyboard.TargetProperty="Opacity"
                    To="0"
                    Duration="{x:Static base:Constants.MouseLeaveDuration}" />
                  <DoubleAnimation
                    Storyboard.TargetName="PART_HorizontalScrollBar"
                    Storyboard.TargetProperty="Opacity"
                    To="0"
                    Duration="{x:Static base:Constants.MouseLeaveDuration}" />
                </Storyboard>
              </BeginStoryboard>
            </EventTrigger>
          </ControlTemplate.Triggers>
        </ControlTemplate>
      </Setter.Value>
    </Setter>
  </Style>

  <ControlTemplate x:Key="DataGridScrollViewerTemplate" TargetType="{x:Type ScrollViewer}">
    <Grid>
      <Grid.ColumnDefinitions>
        <ColumnDefinition Width="Auto" />
        <ColumnDefinition Width="*" />
        <ColumnDefinition Width="Auto" />
      </Grid.ColumnDefinitions>
      <Grid.RowDefinitions>
        <RowDefinition Height="Auto" />
        <RowDefinition Height="*" />
        <RowDefinition Height="Auto" />
      </Grid.RowDefinitions>
      <Button
        Width="{Binding CellsPanelHorizontalOffset, RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}}"
        Command="{x:Static DataGrid.SelectAllCommand}"
        Focusable="false"
        Style="{DynamicResource {ComponentResourceKey ResourceId=DataGridSelectAllButtonStyle,
                                                      TypeInTargetAssembly={x:Type DataGrid}}}"
        Visibility="{Binding HeadersVisibility, ConverterParameter={x:Static DataGridHeadersVisibility.All}, Converter={x:Static DataGrid.HeadersVisibilityConverter}, RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}}" />
      <DataGridColumnHeadersPresenter
        x:Name="PART_ColumnHeadersPresenter"
        Grid.Column="1"
        Visibility="{Binding HeadersVisibility, ConverterParameter={x:Static DataGridHeadersVisibility.Column}, Converter={x:Static DataGrid.HeadersVisibilityConverter}, RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}}" />
      <ScrollContentPresenter
        x:Name="PART_ScrollContentPresenter"
        Grid.Row="1"
        Grid.ColumnSpan="2"
        Margin="{TemplateBinding Padding}"
        CanContentScroll="{TemplateBinding CanContentScroll}" />
      <ScrollBar
        x:Name="PART_VerticalScrollBar"
        Grid.Row="1"
        Grid.Column="2"
        Maximum="{TemplateBinding ScrollableHeight}"
        Opacity="0"
        Orientation="Vertical"
        ViewportSize="{TemplateBinding ViewportHeight}"
        Visibility="{TemplateBinding ComputedVerticalScrollBarVisibility}"
        Value="{Binding VerticalOffset, Mode=OneWay, RelativeSource={RelativeSource TemplatedParent}}" />
      <Grid Grid.Row="2" Grid.Column="1">
        <Grid.ColumnDefinitions>
          <ColumnDefinition Width="{Binding NonFrozenColumnsViewportHorizontalOffset, RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}}" />
          <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>
        <ScrollBar
          x:Name="PART_HorizontalScrollBar"
          Grid.Column="1"
          Maximum="{TemplateBinding ScrollableWidth}"
          Opacity="0"
          Orientation="Horizontal"
          ViewportSize="{TemplateBinding ViewportWidth}"
          Visibility="{TemplateBinding ComputedHorizontalScrollBarVisibility}"
          Value="{Binding HorizontalOffset, Mode=OneWay, RelativeSource={RelativeSource TemplatedParent}}" />
      </Grid>
    </Grid>
    <ControlTemplate.Triggers>
      <EventTrigger RoutedEvent="UIElement.MouseEnter">
        <BeginStoryboard>
          <Storyboard>
            <DoubleAnimation
              Storyboard.TargetName="PART_VerticalScrollBar"
              Storyboard.TargetProperty="Opacity"
              To="1"
              Duration="0:0:0.15" />
            <DoubleAnimation
              Storyboard.TargetName="PART_HorizontalScrollBar"
              Storyboard.TargetProperty="Opacity"
              To="1"
              Duration="0:0:0.15" />
          </Storyboard>
        </BeginStoryboard>
      </EventTrigger>
      <EventTrigger RoutedEvent="UIElement.MouseLeave">
        <BeginStoryboard>
          <Storyboard>
            <DoubleAnimation
              Storyboard.TargetName="PART_VerticalScrollBar"
              Storyboard.TargetProperty="Opacity"
              To="0"
              Duration="0:0:0.15" />
            <DoubleAnimation
              Storyboard.TargetName="PART_HorizontalScrollBar"
              Storyboard.TargetProperty="Opacity"
              To="0"
              Duration="0:0:0.15" />
          </Storyboard>
        </BeginStoryboard>
      </EventTrigger>
    </ControlTemplate.Triggers>
  </ControlTemplate>
</ResourceDictionary>
