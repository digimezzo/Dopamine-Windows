<ResourceDictionary
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:controls="clr-namespace:Dopamine.Presentation.Controls">

  <ResourceDictionary.MergedDictionaries>
    <ResourceDictionary Source="/Dopamine.Presentation;component/Resources/Styles/FontStyles.xaml" />
  </ResourceDictionary.MergedDictionaries>

  <!--  Separator  -->
  <Style x:Key="{x:Static MenuItem.SeparatorStyleKey}" TargetType="{x:Type Separator}">
    <Setter Property="Height" Value="1" />
    <Setter Property="Margin" Value="5,0,5,0" />
    <Setter Property="Template">
      <Setter.Value>
        <ControlTemplate TargetType="{x:Type Separator}">
          <Rectangle Height="{TemplateBinding Height}" Fill="{DynamicResource RG_ContextMenuSeparatorBrush}" />
        </ControlTemplate>
      </Setter.Value>
    </Setter>
  </Style>

  <!--  Outer menu items  -->
  <Style TargetType="{x:Type MenuItem}">
    <Setter Property="Background" Value="Transparent" />
    <Setter Property="Foreground" Value="{DynamicResource RG_BlackBrush}" />
    <Style.Triggers>
      <Trigger Property="IsEnabled" Value="False">
        <Setter Property="Foreground" Value="{DynamicResource RG_BlackBrush}" />
        <Setter Property="Opacity" Value="0.5" />
      </Trigger>
    </Style.Triggers>
  </Style>

  <!--  Outer menu  -->
  <Style TargetType="{x:Type ContextMenu}">
    <Setter Property="OverridesDefaultStyle" Value="True" />
    <Setter Property="UseLayoutRounding" Value="True" />
    <Setter Property="FontSize" Value="12" />
    <Setter Property="Template">
      <Setter.Value>
        <ControlTemplate TargetType="{x:Type ContextMenu}">
          <Border>
            <Border
              x:Name="Border"
              Margin="10"
              Background="{DynamicResource RG_WhiteBrush}">
              <StackPanel
                ClipToBounds="True"
                IsItemsHost="True"
                Orientation="Vertical" />
              <Border.Effect>
                <DropShadowEffect
                  BlurRadius="10"
                  Opacity="0.5"
                  ShadowDepth="0"
                  Color="Black" />
              </Border.Effect>
            </Border>
          </Border>
          <ControlTemplate.Triggers>
            <Trigger Property="IsMouseOver" Value="true">
              <Setter TargetName="Border" Property="Background" Value="{DynamicResource RG_WhiteBrush}" />
            </Trigger>
          </ControlTemplate.Triggers>
        </ControlTemplate>
      </Setter.Value>
    </Setter>
  </Style>

  <!--  SubmenuItem  -->
  <ControlTemplate x:Key="{x:Static MenuItem.SubmenuItemTemplateKey}" TargetType="{x:Type MenuItem}">
    <Border
      Name="Border"
      Margin="0,4,0,4"
      Padding="4"
      Background="#00000000">
      <Grid>
        <Grid.ColumnDefinitions>
          <ColumnDefinition Width="Auto" SharedSizeGroup="Icon" />
          <ColumnDefinition Width="*" />
          <ColumnDefinition Width="Auto" SharedSizeGroup="Shortcut" />
          <ColumnDefinition Width="13" />
        </Grid.ColumnDefinitions>
        <ContentPresenter
          Name="Icon"
          Margin="6,0,6,0"
          VerticalAlignment="Center"
          ContentSource="Icon" />
        <Border
          Name="Check"
          Margin="6,0,6,0"
          Background="Transparent"
          BorderBrush="Transparent"
          BorderThickness="0"
          Visibility="Hidden">
          <TextBlock
            Name="CheckMark"
            HorizontalAlignment="Center"
            VerticalAlignment="Center"
            FontSize="15"
            Foreground="{TemplateBinding Foreground}"
            Style="{StaticResource SegoeAssets}"
            Text="&#xE73E;"
            Visibility="Hidden" />
        </Border>
        <ContentPresenter
          Name="HeaderHost"
          Grid.Column="1"
          ContentSource="Header"
          RecognizesAccessKey="True" />
        <TextBlock
          x:Name="InputGestureText"
          Grid.Column="2"
          Margin="10,0,0,0"
          DockPanel.Dock="Right"
          Text="{TemplateBinding InputGestureText}" />
      </Grid>
    </Border>
    <ControlTemplate.Triggers>
      <Trigger Property="Icon" Value="{x:Null}">
        <Setter TargetName="Icon" Property="Visibility" Value="Hidden" />
      </Trigger>
      <Trigger Property="IsChecked" Value="true">
        <Setter TargetName="CheckMark" Property="Visibility" Value="Visible" />
      </Trigger>
      <Trigger Property="IsCheckable" Value="true">
        <Setter TargetName="Check" Property="Visibility" Value="Visible" />
        <Setter TargetName="Icon" Property="Visibility" Value="Hidden" />
      </Trigger>
      <Trigger Property="IsHighlighted" Value="true">
        <Setter TargetName="Border" Property="Background" Value="{DynamicResource RG_AccentBrush}" />
        <Setter Property="Foreground" Value="{DynamicResource RG_WhiteBrush}" />
      </Trigger>
      <Trigger Property="IsEnabled" Value="false">
        <Setter Property="Foreground" Value="{DynamicResource RG_BlackBrush}" />
        <Setter Property="Opacity" Value="0.5" />
      </Trigger>
    </ControlTemplate.Triggers>
  </ControlTemplate>

  <!--  SubmenuHeader  -->
  <ControlTemplate x:Key="{x:Static MenuItem.SubmenuHeaderTemplateKey}" TargetType="{x:Type MenuItem}">
    <Border
      Name="Border"
      Margin="0,4,0,4"
      Padding="4"
      Background="#00000000">
      <Grid>
        <Grid.ColumnDefinitions>
          <ColumnDefinition Width="Auto" SharedSizeGroup="Icon" />
          <ColumnDefinition Width="*" />
          <ColumnDefinition Width="Auto" SharedSizeGroup="Shortcut" />
          <ColumnDefinition Width="13" />
        </Grid.ColumnDefinitions>
        <ContentPresenter
          Name="Icon"
          Margin="6,0,6,0"
          VerticalAlignment="Center"
          ContentSource="Icon" />
        <ContentPresenter
          Name="HeaderHost"
          Grid.Column="1"
          Margin="13,0,0,0"
          ContentSource="Header"
          RecognizesAccessKey="True" />
        <TextBlock
          x:Name="InputGestureText"
          Grid.Column="2"
          Margin="10,0,0,0"
          DockPanel.Dock="Right"
          Text="{TemplateBinding InputGestureText}" />
        <TextBlock
          Grid.Column="3"
          HorizontalAlignment="Center"
          VerticalAlignment="Center"
          FontSize="13"
          Foreground="{TemplateBinding Foreground}"
          Style="{StaticResource SegoeAssets}"
          Text="&#xE00F;" />
        <Popup
          Name="Popup"
          AllowsTransparency="True"
          Focusable="False"
          HorizontalOffset="-3"
          IsOpen="{TemplateBinding IsSubmenuOpen}"
          Placement="Right"
          PopupAnimation="Fade">
          <Border
            Name="SubmenuBorder"
            Margin="10"
            Background="{DynamicResource RG_WhiteBrush}">
            <StackPanel IsItemsHost="True" KeyboardNavigation.DirectionalNavigation="Cycle" />
            <Border.Effect>
              <DropShadowEffect
                BlurRadius="10"
                Opacity="0.5"
                ShadowDepth="0"
                Color="Black" />
            </Border.Effect>
          </Border>
        </Popup>
      </Grid>
    </Border>

    <ControlTemplate.Triggers>
      <Trigger Property="Icon" Value="{x:Null}">
        <Setter TargetName="Icon" Property="Visibility" Value="Hidden" />
      </Trigger>
      <Trigger Property="IsHighlighted" Value="true">
        <Setter TargetName="Border" Property="Background" Value="{DynamicResource RG_AccentBrush}" />
        <Setter Property="Foreground" Value="{DynamicResource RG_WhiteBrush}" />
      </Trigger>
      <Trigger SourceName="Popup" Property="Popup.AllowsTransparency" Value="True">
        <Setter TargetName="SubmenuBorder" Property="CornerRadius" Value="0" />
        <Setter TargetName="SubmenuBorder" Property="Padding" Value="0" />
      </Trigger>
      <Trigger Property="IsEnabled" Value="false">
        <Setter Property="Foreground" Value="{DynamicResource RG_BlackBrush}" />
      </Trigger>
    </ControlTemplate.Triggers>
  </ControlTemplate>
</ResourceDictionary>
